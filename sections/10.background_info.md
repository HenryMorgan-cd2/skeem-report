# Background Information

This chapter will cover how dynamic data is retrieved on a website. To understand it I will briefly cover the architecture of both traditional websites and more recent SPA based websites.

## Traditional Architecture

Traditional architectures treat each page of a site as a separate resource with its own end-point, its own template and its own request. When a user navigates to a page, they will send a request to the server, the server will then look at all the details of the request, what page are they requesting, what parameters have they specifier, and who is making the request. The server will then construct the page in full, complete with styles and content. This will involve the server making multiple database requests in order to retrieve all the needed information. Finally the server sends the completed HTML document back to the client for it to be rendered.

This approach is very simple, the server knows exactly what data it needs to retrieve and is free to query for this data as its needed. When the navigates to a new page, this process is simply repeated and a new page is built afresh.

This pattern does have some disadvantages, however. on slower networks, the user is forced to wait after many interactions even when the upcoming page is very similar. Every request will see them reload many resources which they have previously seen.

> :comment there may be two many problems listed, may should pick a couple

This pattern has a few issues: Many pages on a website look very similar, for instance two different articles on a news site likely both consist of the same header, footer, and sidebar. Yet when navigating to a different article the user still has to download all of these assets. This problem is magnified on devices with slow connection speeds such as mobiles.

A similar issue is that responses always contain the same markup and data independent on the device that is requesting it. For instance, on mobile the site may not display a sidebar which is otherwise present on desktop. This sending of unnecessary data once again causes the most issue on mobile devices.

> :note This specific issue can be alleviated by the use of a mobile dedicated website, though this has its own host of issues such as having to duplicate and maintain lots of functionality which is common between platforms.

> :comment Rigid page strucutres. This approach also does not lend itself to dynamic pages very well.

> :comment Large pages are impracticle for development teams, image facebooks home page, and how many developers work on that.

## SPAs

SPAs (single page applications) solve these issues by moving the page rendering to the client. When a user first goes to the site they download a single javascript bundle which contains the information to render any page of the site. The javascript then, looking at the current url, constructs the page to be rendered and displays it to the user.

When a user navigates to a different page, either by clicking a link or by pressing back in the browser, the javascript will intercept the request and simply construct the new view and render this instead.

This has some obvious benefit's. Since the javascript is fully in charge of rendering it can look at the current device as render specifically what needs to be shown - it does not need to render content which is hidden on small screens when on mobile. This method also means that when a user navigates they can get feedback instantly whether it is the new content or a loading screen, either way the site feels more responsive.

SPAs, however, provide a new challenge - how do you request the dynamic content of the page. Previously the server knew exactly what page the user requested meaning it knew exactly what data was requested. This knowledge combined with direct access to the database resulted in an easy method to retrieve the data. This problem is solved with the introduction of a new sub-system in the websites architecture: the API.

The API is similar to the traditional websites server, it accepts requests performs database queries and returns data. However, instead of returning HTML it returns raw data usually in the form of XML or JSON.

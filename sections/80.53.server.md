## The Server

Skeems server is a package which holds all the main functionality concerned with managing and Skeem application.

The server provides many functions to perform common actions in an application, this includes running migrations, starting a http server, performing a fetch query.

Interfaces such as the CLI are simply wrappers which call these helper functions. This means that both the CLI and GUI do not need to duplicate any logic in themselves and instead focus on conveying the data to the user in the most effective manner.

### The context object {#context_object}

All helper functions require a context object in order to function. This context object holds all the information pertinent to the current skeem application. This includes the applications configuration, the root folder, connections to the database, and the schema.

The schema is stored in memory as it is assumed that the schema will never change without the server being reloaded and therefore caching it can prevent many database requests considering how frequently the schema is loaded.

To create a context object you supply the server with a path. The system then searches recursively upwards from the supplied path looking for a file named `skeem.json`. If this file is not found before the root directory is hit, then an error is thrown stating that no skeem application was found. If the file is found, its location is marked as the root directory and its contents are the configuration object. These two data are then form the basis of the context object.

The context object can also be instantiated by providing the config and root directly. This can be useful when testing the system as it does not require any files to actually exist.

## HTTP Server

The HTTP Server is an interface into skeem just like the CLI. The only difference is this interface exposes a very small selection of the available interface
The server handles all incoming requests. It checks

Skeems server handles all incoming requests

- The server hosts
- listens by http
  - so the client can comminucate
- request and reponse formats
  - why pure json
- authentication token

---

Skeems uses JSON to send requests and receive responses. This allows requests to be much more easily santized against maliscious attempts to manipulate the database in an undesirable way. In other words it helps prevent SQL injection like attacks.

> SQL injection is a code injection technique in which malicious SQL statements are inserted into normally safe SQL by having unsanitized input inserted into the query. SQL injection is a major security vulnerability [@sql_injection].

Due to this sanitization ability queries are safe to execute on the front end and so eliminates the tight coupling between ......
This solves the tight coupling with disperate code issues between the standard client-server model.

All requests are fired to the same end point with a post request and take the form of a JSON object with `type` and `payload`. The type is used to determine what type of request it is: fetch, mutate, etc. and the payload contains specific information depending on the type.

> :comment TREE OF DATA

---

When the server first loads

Authenticating a user

- files in requests

- end point for retrieving files
  - calls to the .retrieve method of the uploaded handle (see section {#file_providers}. The returned stream is piped directly back as the response value.

### Files {#server_files}
